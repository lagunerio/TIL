## § Mac에서 Jupyter

```Bash
$ pip3 install --upgrade pip
$ pip3 install jupyter
$ jupyter notebook
```

<br>

## § 성능 테스트

### 1. 성능 테스트 종류

- Load Test
- Stress Test
- Spike Test
- Stability Test / Soack Test

### 2. 성능테스트 툴

- Apache JMeter
- Load Runner
- Grinder / nGrinder
- ...

### 3. 성능 지표

#### # 키워드
사용자 입장에서 지연 시간(latency time)을 줄여 "짧은 응답 시간(short response time)"을 유지하는 것이 중요하고,
서버 관리자 입장에서 서버 중단 문제를 예방하고, 서버 비용 책정을 위해 개별 서버의 "적절한 처리량(proper throughput)"을 파악하는 것이 우선이다.

- **웹서비스 요청에 대한 평균 응답 시간**
  + 전체 사용자 수가 증가할수록 응답 시간은 늘어날 수 있다.
  + 서버가 수용 가능한 임계치(Threshold)를 넘을 경우, 응답 속도는 급격히 떨어진다.
  + 동시 요청 수, 사용자의 증가, 사용자의 네트워크 위치 등 각종 조건 및 상황에 따라 가변적이다.
  + 평균 응답 시간 뿐만 아니라, 가장 느린 응답을 지표로 삼기도 한다.
- **단위 시간 당 로그인한 사용자 수**
  + 사용자드이 늘 일정한 횟수 (혹은 주기)로 서버에 요청하지 않는다.
  + 웹 서비스는 사용자가 브라우저의 버튼 등을 클릭하지 않으면 서버에 부하를 주지 않는다.
  + 또한, 사용자마다 서비스 이용 패턴(활동)이 다를 수 있다. 짧은 시간을 사용하는 사용자도 있고, 오랜 동안 머무는 사용자들도 있어 편차가 크다.
- **동시 사용자 수 (Active Clients or Concurrent Clients)**
  + 주로 특정 시간 동안 서비스를 요청하는 (서비스에 접속해있는) 사용자 수를 의미한다. 
  + 대부분 특정 시간대(피크 타임)의 1초 동안 서비스를 요청하는 사용자 수로 정의하며 정확한 집계가 어렵다면 웹서버나 WAS의 ACCESS로 그에 찍히는 IP 정보와 시간을 분석해서 도출한다.
  + 세션(로그인 상태를 유지하고 있는 사용자) 수를 측정하는 기법.
  + 접속은 했으나, 실제 작업을 수행하지 않는 사용자가 존재할 수 있다.
  + 웹 서비스는 사용자가 로그아웃한 시점을 파악하기 어렵다.
    (로그아웃 버튼을 클릭하지 않고 웹 브라우저를 닫는 등
- **총 사용자 수**
  + 사용자는 잠재적으로 서비스에 부하를 발생시키고 성능에 영향을 주는 주요한 항목이다. 
  + 현재 서비스의 가입자 항목, 가입은 하지 않았지만 '손님'과 같은 형태로 사용하는 경우도 모두 도출하는 것이 좋다.
- **특정 시점에 실행 중인 서비스(요청) 개수**
  + 서버의 자원 상황 (메모리, CPU, 네트워크)에 따라 성능 편차(오차)가 발생한다.
  + 순간 처리량으로 서버의 모든 성능을 평가할 수 없다. 예를 들어, 모든 작업을 메모리를 이용해 처리하면 최대 처리량이 높아 보일 수 있지만, 처리 결과를 디스크 혹은 네트워크로 전송하기 위해서 최대 처리 성능을 보인 이후에 급격히 성능이 떨어지는 현상이 발생한다.
- **동시 사용자에 따른 평균 응답 시간 (Mean Response Time of Active Clients)**
  + 동시에 N명의 사용자가 요청을 보내는 경우, 평균 응답 시간
  -> [모든 사용자 요청에 대한 각각의 응답 시간의 합]/N
- **동시 사용자에 따른 단위 시간(시/분/초)당 처리 가능 요청 건수 (Transaction Per Second of Active Clients)**
  + 서버가 일정 기간 동안 처리할 수 있는 요청 건수는 최대치를 측정할 수 있다.
  예: 동시에 N명의 사용자가 웹 서비스를 요청할 때, 단위 시간 내에 정상적으로 응답을 완료한 요청의 개수
  + 서버 관리자 입장에서는 가장 중요한 성능 지표가 될 수 있다.


#### # 시간 당 처리량: TPS, PPS, HPS, and RPS

**[1] TPS: Transaction Per Second**

가장 보편적인 성능 지표로, 서버-클라이언트 서버 환경에서 비롯된 단어.
현행 성능 기준 정보를 바탕으로 목표에 대한 값과 대상을 산출하게 되며 향후 5년간 서비스의 발전을 고려해서 최종 성능 테스트 도달 목표를 정하는 것이 좋다. 
예를 들어 현재 동시 사용자가 100명이고 평균 TPS가 2000인데 해당 비즈니스가 매년 20%씩 증가한다고 가정하면 이를 기준으로 5년 후의 동시 사용자와 평균 TPS를 산정하는 것이다.
- TPS: 초당 요청 횟수로, 성능 테스트시 가장 보편적으로 사용하는 수치.
- 평균 TPS: 동시 사용자수와 마찬가지로 피크 타임 때의 로그를 분석해서 평균 TPS를 수집. 이때 주의할 것은 단순한 HTML이나 이미지파일 등 미들웨어나 데이터베이스에 큰 영향을 주지 않는 요청은 제외시키는 것이 좋다.


**[2] PPS: Page Per Second**

웹 서비스에서 특정 URL을 호출했을때, 화면 출력을 위해 CSS, Image 등의 static contents(정적 컨텐츠)를 다운로드받아야 한다.이러한 로딩 시간을 측정하기 위해 사용하는 측정 기준이다.

**[3] HPS: Hit Per Second / RPS: Request Per Second**

static contents(정적 컨텐츠) 외에 XML, JSON과 같은 dynamic contents(동적 컨텐츠) 요청에 대한 응답 시간을 측정하는 기준이다.

<br>

## § Apache JMeter
	
![image](https://user-images.githubusercontent.com/28076398/147813085-890e3e4a-8117-4e57-a4ac-5375044f523e.png)
